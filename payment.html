<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Complete Your Payment | Destro Fruits</title>

<style>
:root{
  --accent:#2ecc71;
  --accent-dark:#239b56;
  --card:#ffffff;
  --bg:#eafaf1;
  --text:#2e3c32;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial, sans-serif;}
body{
  background:var(--bg);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:20px;
}
.payment-wrapper{
  width:460px;
  animation:slide .4s ease-out;
}
@keyframes slide{from{transform:translateY(15px);opacity:0;} to{opacity:1;}}
.card{
  background:var(--card);
  padding:18px;
  border-radius:18px;
  box-shadow:0 12px 28px rgba(0,0,0,0.08);
  margin-bottom:20px;
}
.card-title{
  font-size:17px;
  font-weight:700;
  color:var(--accent-dark);
  margin-bottom:10px;
}
.addr-line{
  font-size:14px;
  color:var(--text);
  margin-top:4px;
}
.summary-row{
  display:flex;
  justify-content:space-between;
  margin:6px 0;
  font-size:14px;
}
.total-section{
  font-size:18px;
  font-weight:700;
  color:var(--accent-dark);
  display:flex;
  justify-content:space-between;
  padding-top:10px;
  border-top:1px solid #ddd;
}

/* Sticky Pay Bar */
.pay-bar{
  position:sticky;
  bottom:0;
  background:var(--accent);
  padding:16px;
  border-radius:16px;
  box-shadow:0 12px 26px rgba(0,0,0,0.18);
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:10px;
}
.pay-bar span{
  font-size:20px;
  font-weight:700;
  color:#fff;
}
.pay-btn{
  background:#fff;
  border:none;
  padding:12px 26px;
  border-radius:10px;
  color:var(--accent-dark);
  font-size:17px;
  font-weight:bold;
  cursor:pointer;
  transition:.2s;
}
.pay-btn:hover{
  transform:scale(1.05);
}

/* Overlay */
#overlay{
  position:fixed;
  top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,.75);
  display:none;justify-content:center;align-items:center;
  flex-direction:column;color:#fff;
}
.loader{
  width:65px;height:65px;
  border:6px solid #fff;
  border-top:6px solid var(--accent);
  border-radius:50%;
  animation:spin .9s linear infinite;
  margin-bottom:15px;
}
@keyframes spin{100%{transform:rotate(360deg);}}
</style>
</head>

<body>

<div class="payment-wrapper">

  <div class="card">
    <div class="card-title">Delivery Address</div>
    <div id="addrBox"></div>
  </div>

  <div class="card">
    <div class="card-title">Order Summary</div>
    <div id="summaryBox"></div>
    <div class="total-section">
      <span>Total</span><span id="payAmount">â‚¹0</span>
    </div>
  </div>

  <div class="pay-bar">
    <span id="bottomAmount">â‚¹0</span>
    <button class="pay-btn" onclick="startPayment()">Pay Now</button>
  </div>

</div>

<!-- Overlay -->
<div id="overlay">
  <div class="loader"></div>
  <div>Processing Paymentâ€¦</div>
</div>


<script>
const cartKey="destro_cart_v2";
const userKey="destro_user_info";
let cart = JSON.parse(localStorage.getItem(cartKey)) || {};
let user = JSON.parse(localStorage.getItem(userKey)) || {};

function formatCurrency(n){return "â‚¹"+Number(n).toFixed(0)}

function loadDetails(){
  document.getElementById("addrBox").innerHTML = `
    <div class="addr-line"><strong>${user.name}</strong></div>
    <div class="addr-line">${user.address}</div>
    <div class="addr-line">${user.city} - ${user.pincode}</div>
    <div class="addr-line">ðŸ“ž ${user.mobile}</div>
  `;

  const box=document.getElementById("summaryBox");
  let html=""; let total=0;

  Object.values(cart).forEach(i=>{
    html += `
      <div class="summary-row">
        <span>${i.name} Ã— ${i.qty}</span>
        <span>â‚¹${i.qty * i.price}</span>
      </div>`;
    total += i.qty * i.price;
  });

  box.innerHTML = html;
  document.getElementById("payAmount").textContent = formatCurrency(total);
  document.getElementById("bottomAmount").textContent = formatCurrency(total);
}
loadDetails();

// âœ… Mock Payment (Add Razorpay later)
function startPayment(){
  document.getElementById("overlay").style.display="flex";
  setTimeout(()=>{
    window.location.href="success.html";
  },2000);
}
</script>

</body>
</html>
