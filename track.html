<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Track Order | Destro Fruits</title>
<style>
:root{--green:#2ecc71;--gray:#ccc;}
body{font-family:Arial;background:#eafaf1;padding:30px;}
.container{max-width:450px;margin:auto;background:#fff;padding:25px;border-radius:12px;box-shadow:0 8px 25px rgba(0,0,0,.08);}
h2{color:#145a32;margin-bottom:12px;}
input{width:100%;padding:12px;border:1px solid #ccc;border-radius:8px;margin-top:10px;}
button{width:100%;padding:12px;margin-top:10px;background:var(--green);color:#fff;font-weight:bold;border:none;border-radius:10px;cursor:pointer;font-size:16px;}
button:hover{opacity:.9;}
.timeline{margin-top:15px;}
.step{display:flex;align-items:center;margin:10px 0;}
.circle{width:20px;height:20px;border-radius:50%;border:2px solid var(--gray);margin-right:10px;position:relative;}
.completed .circle{background:var(--green);border-color:var(--green);}
.line{height:3px;flex:1;background:var(--gray);position:absolute;top:50%;left:20px;z-index:-1;}
.completed .line{background:var(--green);}
.status-text{font-weight:600;}
.cancel-btn{margin-top:10px;background:#e74c3c;}
</style>
</head>
<body>
<div class="container">
<h2>Track Your Order</h2>
<input type="text" id="orderId" placeholder="Enter Order ID (e.g., DESTRO-123456)">
<button onclick="trackOrder()">Track Order</button>
<div id="result"></div>
</div>

<script>
function trackOrder(){
  const id=document.getElementById("orderId").value.trim();
  let orders = JSON.parse(localStorage.getItem("destro_orders")||"[]");
  let order = orders.find(o=>o.id===id);

  const result=document.getElementById("result");
  if(!order){
    result.innerHTML="<p style='color:red'>Order not found!</p>"; return;
  }

  const steps=["Pending","Shipped","Out for Delivery","Delivered"];
  const deliveryDate=new Date(); deliveryDate.setDate(deliveryDate.getDate()+5);

  let html=`<div class="timeline">`;
  steps.forEach((s,i)=>{
    let completed=steps.indexOf(s)<=steps.indexOf(order.status)?"completed":"";
    html+=`<div class="step ${completed}">
      <div class="circle"></div>
      <div class="line"></div>
      <div class="status-text">${s}</div>
    </div>`;
  });
  html+=`<p><b>Expected Delivery:</b> ${deliveryDate.toLocaleDateString()}</p>`;

  if(order.status==="Pending"){
    html+=`<button class="cancel-btn" onclick="cancelOrder('${order.id}')">Cancel Order</button>`;
  }

  result.innerHTML=html;
}

function cancelOrder(id){
  let orders = JSON.parse(localStorage.getItem("destro_orders")||"[]");
  let order = orders.find(o=>o.id===id);
  if(order && order.status==="Pending"){
    order.status="Cancelled";
    localStorage.setItem("destro_orders",JSON.stringify(orders));
    alert("Order Cancelled!");
    trackOrder();
  }
}
</script>
</body>
</html>
